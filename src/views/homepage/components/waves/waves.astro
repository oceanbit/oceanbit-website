---
import styles from "./waves.module.scss";

interface Props {
  className?: string | undefined;
}

const { className = "" } = Astro.props;
---

<div class={`${className} ${styles.container}`}>
  <canvas
    data-is-wave="true"
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"
  ></canvas>
</div>

<script>
  import { WaveCanvas } from "./wave-canvas";

  document.querySelectorAll(`canvas[data-is-wave="true"]`).forEach((canvas) => {
    const x = 600;
    const scale = 0.6;

    const waveConfigs = [
      // Right waves
      {
        type: "right",
        x: x,
        y: 150,
        scale,
        delay: 0,
        imageSrc: "/wave.svg",
      },
      {
        type: "right",
        x: x,
        y: 350,
        scale,
        delay: 0.3,
        imageSrc: "/wave.svg",
      },
      {
        type: "right",
        x: x,
        y: 500,
        scale,
        delay: 0.6,
        imageSrc: "/wave.svg",
      },
      // Left waves
      {
        type: "left",
        x: -x,
        y: 150,
        scale,
        delay: 0.2,
        imageSrc: "/wave.svg",
      },
      {
        type: "left",
        x: -x,
        y: 350,
        scale,
        delay: 0.5,
        imageSrc: "/wave.svg",
      },
      {
        type: "left",
        x: -x,
        y: 500,
        scale,
        delay: 0.8,
        imageSrc: "/wave.svg",
      },
    ] as const;

    new WaveCanvas(canvas as HTMLCanvasElement, waveConfigs);
  });
</script>
